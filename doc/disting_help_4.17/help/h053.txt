This algorithm converts clocks between MIDI clocks, analogue clocks and an internal timebase, in any combination. The mode of operation is determined by parameter 0.

The internal clock is started & stopped by pushing the Z knob. There are two choices, set by parameter 6: a tempo-based clock or a tap tempo clock.

0 - Start/Stop

Push Z to start the internal clock; push it again to stop the clock. Parameter 5 sets the tempo, as 120 plus the parameter value (i.e. the range is 0-240 bpm).

1 - Tap Tempo

Push Z five times to start the clock (i.e. a one bar count-in in 4 time). Hold Z for 2 seconds to stop the clock. While the clock is running, you may continue to tap Z to correct or change the tempo.

Whatever the clock source, outputs A & B generate 5V clock pulses according to parameters 1 & 2. The parameter/divisor relationship is as per the following table:

-2	Run/stop

-1	Reset pulse

0	1/32

1	1/24

2	1/16

3	1/12

4	1/8

5	1/6

6	1/4

7	1/3

8	1/2

9	1/1

10	2/1

11	3/1

12	4/1

In modes that use it, input X is a clock input, with a threshold of 1V. Parameter 3 sets the interpretation of X according to the following table:

0	1/96

1	1/48

2	1/32

3	1/24

4	1/16

5	1/12

6	1/8

7	1/6

8	1/4

9	1/3

10	1/2

11	1/1

Parameter 4 controls whether input Y is used as a run/stop input:

0 - Not used. - The X clock is taken to start as soon as pulses appear on the X input, and is assumed to have stopped if no pulses appear for two seconds.

1 - Run/stop for X. - The X clock is ignored until Y goes high (over 1V) and stops when Y goes low.

2 - Run/stop for internal. - The internal clock starts when Y goes high and stops when Y goes low.

3 - Run/stop for both. - Both the X clock and the internal clock are controlled by Y as above.
